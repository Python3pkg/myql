<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Open Tables - mYQL</title>
  

  <link rel="shortcut icon" href="../img/favicon.ico">

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../css/highlight.css">

  
  <script>
    // Current page data
    var mkdocs_page_name = "table"
  </script>
  
  <script src="../js/jquery-2.1.1.min.js"></script>
  <script src="../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../js/highlight.pack.js"></script>
  <script src="../js/theme.js"></script> 

  
  <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-32441224-4', 'myql.readthedocs.org');
      ga('send', 'pageview');
  </script>
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> mYQL</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        <ul class="current">
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="..">Home</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../myql/">mYQL</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../stockscraper/">StockScraper</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../oauth/">Yahoo-OAuth</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 current">
        <a class="current" href="./">Open Tables</a>
        
            <ul>
            
                <li class="toctree-l3"><a href="#yql-open-table">YQL Open Table</a></li>
                
                    <li><a class="toctree-l4" href="#table">Table</a></li>
                
                    <li><a class="toctree-l4" href="#inputs">Inputs</a></li>
                
                    <li><a class="toctree-l4" href="#paging">Paging</a></li>
                
                    <li><a class="toctree-l4" href="#binder">Binder</a></li>
                
                    <li><a class="toctree-l4" href="#binderfunction">BinderFunction</a></li>
                
                    <li><a class="toctree-l4" href="#the-metaclass-api">The MetaClass API</a></li>
                
            
            </ul>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../contrib/">Contribute</a>
        
    </li>
<li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">mYQL</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
    
    <li>Open Tables</li>
    <li class="wy-breadcrumbs-aside">
      
        
          <a href="https://github.com/josuebrunel/myql" class="icon icon-github"> Edit on GitHub</a>
        
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="yql-open-table">YQL Open Table</h1>
<h2 id="table">Table</h2>
<p>This class represents the <strong>root</strong> element of a YQL Table Definition File. You can read about the full documentation <a href="https://developer.yahoo.com/yql/guide/yql-opentables-reference.html#yql-opentables-tables-element">here</a></p>
<h3 id="definition"><strong>Definition</strong></h3>
<h4 id="tablename-author-apikeyurl-documentationurl-samplequery-descriptionnone-table_attrnone-bindings"><em>Table(name, author, apiKeyURL, documentationURL, sampleQuery=[], description=None, table_attr=None, bindings=[])</em></h4>
<pre><code class="python">&gt;&gt;&gt; from myql.contrib.table import Table
&gt;&gt;&gt; mytable = Table('mytable', 'Josue Kouka', 'http://josuerunel.org/mytable/','http://josuerunel.org/mytable/docs.html',sampleQuery = ['SELECT * FROM mytable', 'SELECT name FROM mytable WHERE id = 77'], description='Just a simple tabe', table_attr={'xmlns':'http://query.yahooapis.com/v1/schema/table.xsd', 'securityLevel':'any', 'https':'false'})
</code></pre>

<h3 id="methods"><strong>Methods</strong></h3>
<h4 id="tableaddbinderbinder_object"><em>Table.addBinder(binder_object)</em></h4>
<p>Add a binder to the table </p>
<pre><code class="python">&gt;&gt;&gt; mytable.addBinder(select_binder)
</code></pre>

<h4 id="tableremovebinderbinder_object"><em>Table.removeBinder(binder_object)</em></h4>
<p>Remove a binder from the table</p>
<pre><code class="python">&gt;&gt;&gt; mytable.removeBinder(select_binder)
</code></pre>

<h4 id="tablesavenamenone-pathnone"><em>Table.save(name=None, path=None)</em></h4>
<p>Save the table as a <em>xml file</em> with Table Object name if <em>name</em> is not provided. If <em>path</em>, saves the <em>xml file</em> to the specified location</p>
<pre><code class="python">&gt;&gt;&gt; mytable.save(name='test',path='/var/www/josuebrunel.org/mytable/')
</code></pre>

<h2 id="inputs">Inputs</h2>
<p>There are 3 kind of <em>inputs</em> as described in the <a href="https://developer.yahoo.com/yql/guide/yql-opentables-reference.html#yql-opentables-key">documentation</a> :</p>
<ul>
<li><strong><em>key</em></strong>  </li>
<li><strong><em>map</em></strong> </li>
<li><strong><em>value</em></strong>  </li>
</ul>
<h3 id="definitions"><strong>Definitions</strong></h3>
<ul>
<li>
<h4 id="inputkeyid-type-paramtype-like-requiredfalse-default-privatefalse-constfalse-batchablefalse-maxbatchitems0"><em>InputKey(id, type, paramType, like='', required=False, default='', private=False, const=False, batchable=False, maxBatchItems=0)</em></h4>
</li>
</ul>
<pre><code class="python">song = InputKey(id='song', type='xs:string', paramType='path', required=True)
</code></pre>

<ul>
<li>
<h4 id="inputvalueid-type-paramtype-like-requiredfalse-default-privatefalse-constfalse-batchablefalse-maxbatchitems0"><em>InputValue(id, type, paramType, like='', required=False, default='', private=False, const=False, batchable=False, maxBatchItems=0)</em></h4>
</li>
</ul>
<pre><code class="python">song = InputValue(id='song', type='xs:string', paramType='path', required=True, const='12' )
</code></pre>

<ul>
<li>
<h4 id="inputmapid-type-paramtype-like-requiredfalse-default-privatefalse-constfalse-batchablefalse-maxbatchitems0"><em>InputMap(id, type, paramType, like='', required=False, default='', private=False, const=False, batchable=False, maxBatchItems=0)</em></h4>
</li>
</ul>
<p>All of those classes are based on <strong><em>BaseInput</em></strong>.</p>
<p><strong><em>like</em></strong> is a replacement for <strong><em>as</em></strong> which is a python keyword. In the <em>xml</em> file, <strong><em>as</em></strong> will be displayed.</p>
<h3 id="methods_1"><strong>Methods</strong></h3>
<p>No methods defined</p>
<h2 id="paging">Paging</h2>
<p>This class describe a <strong><em>paging</em></strong> element. A <strong><em>paging</em></strong> is deifined by one of the 3 classes below :</p>
<ul>
<li><strong><em>PagingPage</em></strong></li>
<li><strong><em>PagingUrl</em></strong></li>
<li><strong><em>PagingOffset</em></strong></li>
</ul>
<p>Check out the full <a href="https://developer.yahoo.com/yql/guide/yql-opentables-reference.html#yql-opentables-paging">documentation</a></p>
<h3 id="definitions_1"><strong>Definitions</strong></h3>
<ul>
<li>
<h4 id="pagingpagestart-pagesize-total"><em>PagingPage(start={}, pageSize={}, total={})</em></h4>
</li>
</ul>
<pre><code class="python">&gt;&gt;&gt; mypage = PagingPage({'id': 'ItemPage', 'default': '1'}, {'id':'Count' ,'max':'25'},{'default': '10'})
</code></pre>

<ul>
<li>
<h4 id="pagingurlnextpage"><em>PagingUrl(nextpage)</em></h4>
</li>
</ul>
<pre><code class="python">&gt;&gt;&gt; mypage = PagingUrl(&quot;ysearchresponse.nextpage&quot;)
</code></pre>

<ul>
<li>
<h4 id="pagingoffsetmatrix-start-pagesize-total"><em>PagingOffset(matrix, start={}, pageSize={}, total={})</em></h4>
</li>
</ul>
<pre><code class="python">&gt;&gt;&gt; mypage = PagingOffset({'id': 'ItemPage', 'default': '1'}, {'id':'Count' ,'max':'25'},{'default': '10'})
</code></pre>

<p>All these classes above subclass <strong><em>BasePaging</em></strong> .</p>
<h3 id="methods_2"><strong>Methods</strong></h3>
<p>No methods defined</p>
<h2 id="binder">Binder</h2>
<p>This class represents an element under <strong><bindings></strong>. Which means :</p>
<ul>
<li>select</li>
<li>insert</li>
<li>update</li>
<li>delete</li>
</ul>
<p>You can read about the full documentation <a href="https://developer.yahoo.com/yql/guide/yql-opentables-reference.html#yql-opentables-select">here</a></p>
<h3 id="definition_1"><strong>Definition</strong></h3>
<h4 id="bindername-itempath-produces-pollingfrequencyseconds0-urls-inputs-pagingnone"><em>Binder(name, itemPath, produces, pollingFrequencySeconds=0, urls=[], inputs=[], paging=None)</em></h4>
<pre><code class="python">&gt;&gt;&gt; select = Binder('select', 'products.product', 'xml')
</code></pre>

<h3 id="methods_3"><strong>Methods</strong></h3>
<h4 id="binderaddinputinput_object"><em>Binder.addInput(input_object)</em> :</h4>
<p>Add an input object to the binder</p>
<pre><code class="python">&gt;&gt;&gt; song = InputKey(id='song', type='xs:string', paramType='path', required=True)
&gt;&gt;&gt; select.addBinder(song)
</code></pre>

<h4 id="binderremoveinputinput_id-input_type"><em>Binder.removeInput(input_id, input_type)</em></h4>
<p>Remove an input object from the binder. <strong><em>input_type</em></strong> may be <strong><em>key, value or map</em></strong></p>
<pre><code class="python">&gt;&gt;&gt; select.removeBinder('song','select')
</code></pre>

<h4 id="binderaddurlurl"><em>Binder.addUrl(url)</em></h4>
<p>Add an url to the binder</p>
<pre><code class="python">&gt;&gt;&gt; select.addUrl('http://lol.com/{song}')
</code></pre>

<h4 id="binderremoveurlurl"><em>Binder.removeUrl(url)</em></h4>
<p>Remove an url from the binder</p>
<pre><code class="python">&gt;&gt;&gt; select.removeUrl('http://lol.com/{song}')
</code></pre>

<h4 id="binderaddpagingpaging_instance"><em>Binder.addPaging(paging_instance)</em></h4>
<p>Add a paging to the binder</p>
<pre><code class="python">&gt;&gt;&gt; mypage = PagingUrl(&quot;ysearchresponse.nextpage&quot;)
&gt;&gt;&gt; select.addPaging(mypage)
</code></pre>

<h4 id="binderremovepaging"><em>Binder.removePaging()</em></h4>
<p>Remove a paging from the binder</p>
<pre><code class="python">&gt;&gt;&gt; select.removePaging()
</code></pre>

<h2 id="binderfunction">BinderFunction</h2>
<p>This class represents a stored function. Read the full documentation <a href="https://developer.yahoo.com/yql/guide/yql-opentables-reference.html#reference-function">here</a></p>
<h3 id="definition_2"><strong>Definition</strong></h3>
<h4 id="binderfunctionfunc_name-func_code-func_filenone-inputs"><em>BinderFunction(func_name, func_code='', func_file=None, inputs=[])</em></h4>
<ul>
<li><strong><em>func_name</em></strong>   : function name</li>
<li><strong><em>func_code</em></strong>   : function code passed as string</li>
<li><strong><em>func_file</em></strong>   : file containing the function</li>
<li><strong><em>inputs</em></strong>      : list of inputs</li>
</ul>
<pre><code class="python">&gt;&gt;&gt; myfunc = BinderFunction('concat', func_code=&quot;console.log('Hello Josh!!!')&quot;)
</code></pre>

<h3 id="methods_4"><strong>Methods</strong></h3>
<p>As <strong><em>Binder</em></strong>, <strong><em>BinderFunction</em></strong> is a subclass of <strong><em>BaseBinder</em></strong>. They both share the same methods</p>
<h2 id="the-metaclass-api">The MetaClass API</h2>
<p><strong><em>BinderModel</em></strong> and <strong><em>TableModel</em></strong> are the only classes to keep in mind here. They're respectively subclasses of <strong><em>BinderMeta</em></strong> and <strong><em>TableMeta</em></strong>. Those last two help providing a powerful API to define YQL Table.</p>
<p>They say <em>"A picture is worth a thousand of words"</em> and I say <em>"A code snippet 
is worth ..."</em> . You got it (^_^). </p>
<p>Copy and paste the code snippet below in a <em>example.py</em></p>
<pre><code class="python">from myql.contrib.table import BinderModel, InputKey, PagingPage, PagingUrl, InputValue, BinderFunction
from myql.contrib.table import TableModel, BinderFrom

class SelectBinder(BinderModel):
    name = 'select'
    itemPath = 'products.product'
    produces = 'xml'
    pollingFrequencySeconds = 30
    urls = ['http://lol.com/services?artist={artis}','http://lol.com/services/song={song}']
    paging = PagingPage({'id': 'ItemPage', 'default': '1'}, {'id':'Count' ,'max':'25'},{'default': '10'})
    artist = InputKey(id='artist', type='xs:string', paramType='path')
    song = InputKey(id='song', type='xs:string', paramType='path', required=True)

class InsertBinder(BinderModel):
    name = 'insert'
    itemPath = 'products.product'
    produces = 'xml'
    pollingFrequencySeconds = 30
    urls = ['http://lol.com/services?artist={artis}','http://lol.com/services/song={song}']
    paging = PagingUrl(nextpage={'path':'yqlsearch.nextpage'})
    artist = InputKey(id='artist', type='xs:string', paramType='path')
    song = InputValue(id='song', type='xs:string', paramType='path', required=True)


class TestTable(TableModel):
    name = 'Test'
    author = 'Josue Kouka'
    apiKeyURL = 'http://josuebrunel.org/api'
    documentationURL = 'http://josuebrunel.org/doc.html'
    description = &quot;Just a test table&quot;
    sampleQuery = ['SELECT * FROM mytable','SELECT name FROM mytable WHERE id=4656', &quot;SELECT * FROM mytable WHERE name='Josh'&quot;]
    select = BinderFrom(SelectBinder)
    insert = BinderFrom(InsertBinder)
    func1 = BinderFunction('concat', func_code=&quot;console.log('Hello Josh!!!')&quot;)

TestTable.table.save(name='Example')
</code></pre>

<p>Run </p>
<pre><code class="shell">$ python example.py
$ cat Example.xml
</code></pre>

<pre><code class="xml">&lt;?xml version=&quot;1.0&quot; ?&gt;
&lt;table https=&quot;false&quot; securityLevel=&quot;any&quot; xmlns=&quot;http://query.yahooapis.com/v1/schema/table.xsd&quot;&gt;
    &lt;meta&gt;
        &lt;apiKey&gt;http://josuebrunel.org/api&lt;/apiKey&gt;
        &lt;author&gt;Josue Kouka&lt;/author&gt;
        &lt;description&gt;Just a test table&lt;/description&gt;
        &lt;documentationURL&gt;http://josuebrunel.org/doc.html&lt;/documentationURL&gt;
        &lt;sampleQuery&gt;SELECT * FROM mytable&lt;/sampleQuery&gt;
        &lt;sampleQuery&gt;SELECT name FROM mytable WHERE id=4656&lt;/sampleQuery&gt;
        &lt;sampleQuery&gt;SELECT * FROM mytable WHERE name='Josh'&lt;/sampleQuery&gt;
    &lt;/meta&gt;
    &lt;bindings&gt;
        &lt;function name=&quot;concat&quot;&gt;
            &lt;execute&gt;
    ![CDATA]console.log('Hello Josh!!!')]]
    &lt;/execute&gt;
        &lt;/function&gt;
        &lt;insert itemPath=&quot;products.product&quot; produces=&quot;xml&quot;&gt;
            &lt;urls&gt;
                &lt;url&gt;http://lol.com/services?artist={artis}&lt;/url&gt;
                &lt;url&gt;http://lol.com/services/song={song}&lt;/url&gt;
            &lt;/urls&gt;
            &lt;inputs&gt;
                &lt;value id=&quot;song&quot; required=&quot;true&quot; type=&quot;xs:string&quot;/&gt;
                &lt;key id=&quot;artist&quot; type=&quot;xs:string&quot;/&gt;
            &lt;/inputs&gt;
            &lt;paging model=&quot;url&quot;&gt;
                &lt;nextpage path=&quot;yqlsearch.nextpage&quot;/&gt;
            &lt;/paging&gt;
        &lt;/insert&gt;
        &lt;select itemPath=&quot;products.product&quot; produces=&quot;xml&quot;&gt;
            &lt;urls&gt;
                &lt;url&gt;http://lol.com/services?artist={artis}&lt;/url&gt;
                &lt;url&gt;http://lol.com/services/song={song}&lt;/url&gt;
            &lt;/urls&gt;
            &lt;inputs&gt;
                &lt;key id=&quot;song&quot; required=&quot;true&quot; type=&quot;xs:string&quot;/&gt;
                &lt;key id=&quot;artist&quot; type=&quot;xs:string&quot;/&gt;
            &lt;/inputs&gt;
            &lt;paging model=&quot;page&quot;&gt;
                &lt;start default=&quot;1&quot; id=&quot;ItemPage&quot;/&gt;
                &lt;total default=&quot;10&quot;/&gt;
                &lt;pageSize id=&quot;Count&quot; max=&quot;25&quot;/&gt;
            &lt;/paging&gt;
        &lt;/select&gt;
    &lt;/bindings&gt;
&lt;/table&gt;

</code></pre>

<p>Voila, i think we're done here</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../contrib/" class="btn btn-neutral float-right" title="Contribute"/>Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../oauth/" class="btn btn-neutral" title="Yahoo-OAuth"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
    <!-- Copyright etc -->
    </p>
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>

  </div>

<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a class="icon icon-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../oauth/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../contrib/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>

</body>
</html>
